<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>教师提醒</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="format-detection" content="telephone=no">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <!-- <link rel="alternate icon" type="image/png" href="/thirdparty/amazeui/i/favicon.png"> -->
  <link rel="stylesheet" href="/thirdparty/amazeui/css/amazeui.css"/>
  <link rel="stylesheet" href="/thirdparty/amazeui/css/sumoselect.css"/>
  <script type="text/javascript" src="../js/common/jquery-2.1.3.js"></script>
  <script type="text/javascript" src="/thirdparty/amazeui/js/amazeui.min.js"></script>
  <script type="text/javascript" src="/thirdparty/amazeui/js/amazeui.widgets.helper.min.js"></script>
  <script type="text/javascript" src="/thirdparty/amazeui/js/jquery.sumoselect.min.js"></script>
  
  <style>
    .header {
      text-align: center;
    }
    .header h1 {
      font-size: 200%;
      color: #333;
      margin-top: 30px;
    }
    .header p {
      font-size: 14px;
    }
  </style>
</head>
<body>
 <header data-am-widget="header" class="am-header am-header-default">

      <h1 class="am-header-title">
            教师提醒
      </h1>

  </header>
<div class="am-g">
  <div class="am-u-lg-6 am-u-md-8 am-u-sm-centered am-margin-top">

    <form id="mainform" class="am-form"  data-am-validator>
          
      
      <div class="am-g am-margin-bottom">
      <label for="doc-ipt-email-1" class="am-u-sm-3">标题</label>
      <div class="am-u-sm-9"><input type="text" class="" id="doc-ipt-email-1" minlength="3" placeholder="输入标题（至少 3 个字符）" required></div>
      </div>
      
      <div class="am-g am-margin-bottom">
      <label for="studentlist" class="am-u-sm-3">被提醒人</label>
      <div class="am-u-sm-9">
     
            
            <select multiple="multiple" placeholder="Hello  im from placeholder" required class="SlectBox" id="studentlist">
 
            </select>
		</div>
      </div>
      
 <!--       <div class="am-g am-margin-bottom">
      <label for="studentlist1" class="am-u-sm-3">被提醒人</label>
      <div class="am-u-sm-9">
      <select multiple data-am-selected="{maxHeight: 150}" required minchecked="2" id="studentlist1">
		</select>
      </div>
      </div>
       -->
      
      <div class="am-g am-margin-bottom">
	      <label for="doc-ta-1" class="am-u-sm-3">文本域</label>
	      <div class="am-u-sm-9"> <textarea class="" rows="5" id="doc-ta-1" minlength="10" maxlength="100"></textarea></div>
      </div>
      
     <div class="am-g am-margin-bottom ">
	      <label class="am-u-sm-3">添加附件</label>
	      <div class="am-u-sm-9" id="uploadwapper">
	      	<div class="am-margin-bottom-sm am-form-file">
	      		<button type="button" class="am-btn am-btn-default am-btn-sm" ><i class="am-icon-cloud-upload"></i> 请选择文件</button>
	      		<input id="doc-form-file" type="file">
	      	</div>
	      	
    <!-- 	<div class="am-margin-bottom-sm upload-item">
	      		<div class="am-g am-margin-bottom-xs">
		      		<div class="am-u-sm-9">aaa.jpg</div>
		      		<div class="am-u-sm-3"><button type="button" class="am-btn am-btn-danger am-btn-xs am-fr" onclick="uidel(this)">删除</button></div>
	      		</div>
		      	<div class="am-progress am-progress-xs">
				    <div class="am-progress-bar" style="width: 80%"></div>
				</div>
	      	</div>
	      	-->
	      
		  </div>
      </div>
    <div id="file-list"></div>

      
<div class="am-g">
	      <label for="doc-ta-1" class="am-u-sm-3"></label>
	      <div class="am-u-sm-9"><button onclick="ajaxsubmit();" class="am-btn am-btn-success">提交</button></div>
      </div>

      
      
    </form>

  </div>
</div>
	<script>
	 /**
     *    侦查附件上传情况    ,这个方法大概0.05-0.1秒执行一次
     */
    function onprogress(evt){
        var loaded = evt.loaded;                  //已经上传大小情况 
        var tot = evt.total;                      //附件总大小 
        var per = Math.floor(100*loaded/tot);      //已经上传的百分比  
        $('#uploadwapper').find(".am-progress-bar:last").css("width" , per +"%");
    }
    function uidel(elem){
    	$(elem).parents('.upload-item').remove();
    }
    function ajaxsubmit(){
    	
    }
	  $(function() {
		



		 //上传
	    $('#doc-form-file').on('change', function() {
	    	var file = this.files[0];
	    	
	    	var filehtml='';
	    	filehtml+='<div class="am-margin-bottom-sm upload-item"><div class="am-g am-margin-bottom-xs"><div class="am-u-sm-9">';
	    	filehtml+=file.name;
	    	filehtml+='</div><div class="am-u-sm-3"><button type="button" class="am-btn am-btn-danger am-btn-xs am-fr" onclick="uidel(this)">删除</button></div></div><div class="am-progress am-progress-xs"><div class="am-progress-bar"></div></div></div>';
	    	
	    	$('#uploadwapper').append(filehtml);
	    	
	        var formData = new FormData();
	        formData.append("uploadInputFile" , file);
	        formData.append("userId","mtbi2")
	    	
	        $.ajax({
	            type: "POST",
	            url: "/tch/fileUpload.do",
	            data: formData ,
	            processData : false,  
	            //必须false才会自动加上正确的Content-Type   
	            contentType : false , 
	            xhr: function(){
	                 var xhr = $.ajaxSettings.xhr();
	                 if(onprogress && xhr.upload) {
	                     xhr.upload.addEventListener("progress" , onprogress, false);
	                     return xhr;
	                 }
	             },
	             success:function(data){  
	                 alert(data.result);
	             }   
	         });
	    });
	    
	 
	  });
	</script>
<script type="text/javascript" src="../js/common/_config.js"></script>
<script type="text/javascript" src="../js/common/cts_common.js"></script>
<script type="text/javascript" src="../js/weixin/alarm_add.js"></script>
</body>
</html>